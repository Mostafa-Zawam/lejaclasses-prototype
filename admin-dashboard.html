<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="light" data-density="comfortable">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LeJaClasses – لوحة تحكم المشرف</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- DaisyUI (CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.7.2/dist/full.css" rel="stylesheet" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    /* ==========================
       STANDARD, LIGHT FONT SYSTEM
    ========================== */
    *{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
      letter-spacing:-0.005em;
    }

    body{
      background-color: var(--fallback-b1, oklch(var(--b1)));
      color: var(--fallback-bc, oklch(var(--bc)));
    }

    /* ==========================
       DENSITY TOKENS (Compact/Comfortable)
    ========================== */
    :root{
      --pad-page: 24px;     /* main padding */
      --gap-page: 24px;     /* vertical gaps */
      --card-pad: 24px;     /* card padding */
      --card-radius: 14px;  /* card radius */
      --btn-radius: 12px;

      --title-size: 28px;
      --h3-size: 18px;
      --body-size: 14px;

      --fw-title: 700;
      --fw-h3: 600;
      --fw-body: 500;
    }

    html[data-density="compact"]{
      --pad-page: 16px;
      --gap-page: 16px;
      --card-pad: 16px;
      --card-radius: 12px;

      --title-size: 24px;
      --h3-size: 16px;
      --body-size: 13px;

      --fw-title: 700;
      --fw-h3: 600;
      --fw-body: 500;
    }

    /* ==========================
       BACKGROUND GRID (subtle)
    ========================== */
    .page-bg{
      background-image: radial-gradient(
        circle at 1px 1px,
        color-mix(in oklab, oklch(var(--b3)) 30%, transparent) 1px,
        transparent 0
      );
      background-size: 18px 18px;
    }

    /* ==========================
       CARDS
    ========================== */
    .notion-card{
      background: var(--fallback-b1, oklch(var(--b1)));
      border: 1px solid var(--fallback-b3, oklch(var(--b3)));
      border-radius: var(--card-radius);
      box-shadow: 0 1px 3px rgba(0,0,0,.06);
      transition: transform .2s ease, box-shadow .2s ease, background-color .2s ease;
    }
    .notion-card:hover{ box-shadow: 0 10px 26px rgba(0,0,0,.08); }

    .stat-card{
      background: var(--fallback-b1, oklch(var(--b1)));
      border: 1px solid var(--fallback-b3, oklch(var(--b3)));
      border-radius: var(--card-radius);
      transition: transform .2s ease, box-shadow .2s ease;
      position: relative;
      overflow: hidden;
    }
    .stat-card:hover{
      transform: translateY(-2px);
      box-shadow: 0 12px 28px rgba(0,0,0,.10);
    }

    .session-card{
      background: var(--fallback-b1, oklch(var(--b1)));
      border: 1px solid var(--fallback-b3, oklch(var(--b3)));
      border-radius: var(--card-radius);
      transition: transform .2s ease, background-color .2s ease, box-shadow .2s ease;
    }
    .session-card:hover{
      transform: translateY(-1px);
      background-color: var(--fallback-b2, oklch(var(--b2)/0.6));
      box-shadow: 0 10px 20px rgba(0,0,0,.08);
    }

    /* ==========================
       NAVBAR / FORMS / BUTTONS
    ========================== */
    .navbar{
      background: var(--fallback-b1, oklch(var(--b1)));
      border-bottom: 1px solid var(--fallback-b3, oklch(var(--b3)));
      backdrop-filter: blur(10px);
    }

    .btn{ border-radius: var(--btn-radius); font-weight: 600; }
    .badge{ border-radius: 999px; font-weight: 600; }

    .select,.input{
      border: 1px solid var(--fallback-b3, oklch(var(--b3)));
      border-radius: var(--btn-radius);
      background: var(--fallback-b1, oklch(var(--b1)));
      font-weight: 600;
    }

    /* ==========================
       SIDEBAR
    ========================== */
    .sidebar-shell{
      height:100vh;
      position:sticky;
      top:0;
      display:flex;
      flex-direction:column;
    }

    .sidebar-link{
      border-radius: var(--btn-radius);
      padding: 10px 12px;
      transition: background-color .15s ease, box-shadow .15s ease;
      font-weight: 600;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .sidebar-link:hover{ background-color: var(--fallback-b2, oklch(var(--b2)/0.7)); }
    .sidebar-link.active{
      background-color: var(--fallback-b2, oklch(var(--b2)));
      box-shadow: inset 0 0 0 1px var(--fallback-b3, oklch(var(--b3)));
      font-weight: 700;
    }

    /* Notification dot */
    @keyframes pulse{0%{opacity:.6}50%{opacity:1}100%{opacity:.6}}
    .notification-dot{animation:pulse 2s infinite;}

    /* Header gradient */
    .gradient-text{
      background: linear-gradient(135deg,
        color-mix(in oklab, oklch(var(--bc)) 90%, transparent) 0%,
        color-mix(in oklab, oklch(var(--su)) 90%, transparent) 100%
      );
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }

    /* Focus ring */
    :focus-visible{
      outline: 3px solid color-mix(in oklab, oklch(var(--p)) 35%, transparent);
      outline-offset: 2px;
      border-radius: var(--btn-radius);
    }

    /* Scrollbar */
    ::-webkit-scrollbar{width:10px;height:10px}
    ::-webkit-scrollbar-track{background: var(--fallback-b2, oklch(var(--b2))); border-radius: 999px}
    ::-webkit-scrollbar-thumb{background: var(--fallback-b3, oklch(var(--b3))); border-radius: 999px}
    ::-webkit-scrollbar-thumb:hover{background: var(--fallback-n, oklch(var(--n)))}

    /* Pills (Lang / Density) */
    .pill{
      border: 1px solid var(--fallback-b3, oklch(var(--b3)));
      background: color-mix(in oklab, var(--fallback-b2, oklch(var(--b2))) 70%, transparent);
      border-radius: 999px;
      padding: 8px 12px;
      font-weight: 700;
      display:flex;
      align-items:center;
      gap:8px;
    }

    /* LTR border polish */
    html[dir="ltr"] .drawer-side aside{ border-left: 0 !important; border-right: 1px solid var(--fallback-b3, oklch(var(--b3))) !important; }

    /* Typography helpers (standard) */
    .t-title{ font-size: var(--title-size); font-weight: var(--fw-title); }
    .t-h3{ font-size: var(--h3-size); font-weight: var(--fw-h3); }
    .t-body{ font-size: var(--body-size); font-weight: var(--fw-body); }
    .t-muted{ color: color-mix(in oklab, oklch(var(--bc)) 55%, transparent); }
  </style>
</head>

<body class="bg-base-100 text-base-content page-bg">
  <div class="drawer lg:drawer-open">
    <input id="sidebar-toggle" type="checkbox" class="drawer-toggle" />

    <!-- MAIN CONTENT -->
    <div class="drawer-content min-h-screen flex flex-col">

      <!-- NAVBAR -->
      <div class="navbar px-6 sticky top-0 z-30">
        <div class="flex items-center gap-3">
          <label for="sidebar-toggle" class="btn btn-ghost lg:hidden p-2" aria-label="فتح القائمة">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </label>

          <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-2xl bg-base-content flex items-center justify-center shadow-sm">
              <i class="fas fa-graduation-cap text-base-100 text-sm"></i>
            </div>
            <div class="leading-tight">
              <h1 class="text-lg font-semibold">LeJaClasses</h1>
              <span class="text-xs t-muted hidden md:inline" data-i18n="top.subtitle">لوحة تحكم المشرف</span>
            </div>
          </div>
        </div>

        <div class="flex items-center gap-2">

          <!-- Density Toggle -->
          <button id="densityToggle" class="pill" aria-label="تبديل المسافات">
            <i class="fas fa-arrows-alt-v"></i>
            <span id="densityLabel" data-i18n="density.label">Comfortable</span>
          </button>

          <!-- Language Toggle -->
          <button id="langToggle" class="pill" aria-label="تبديل اللغة">
            <i class="fas fa-language"></i>
            <span id="langLabel">EN</span>
          </button>

          <!-- Search -->
          <div class="hidden md:flex items-center bg-base-200/80 border border-base-300 rounded-2xl px-3 py-2">
            <i class="fas fa-search text-neutral/50 text-sm"></i>
            <input type="text" data-i18n-placeholder="search.placeholder" placeholder="بحث..." class="bg-transparent border-none outline-none px-2 text-sm w-48" />
          </div>

          <!-- Notifications -->
          <div class="dropdown dropdown-end">
            <div tabindex="0" role="button" class="btn btn-ghost btn-circle btn-sm" aria-label="التنبيهات">
              <div class="indicator">
                <i class="fas fa-bell text-lg"></i>
                <span class="badge badge-xs badge-error indicator-item notification-dot"></span>
              </div>
            </div>
            <div tabindex="0" class="dropdown-content z-[1] w-80 p-2">
              <div class="notion-card p-3">
                <div class="flex justify-between items-center mb-2 px-1">
                  <h3 class="text-sm font-semibold" data-i18n="notif.title">التنبيهات</h3>
                  <span class="text-xs t-muted" data-i18n="notif.count">3 جديدة</span>
                </div>

                <div class="space-y-3 max-h-60 overflow-y-auto p-1">
                  <div class="flex items-start gap-3 p-3 rounded-2xl border border-base-300">
                    <div class="w-10 h-10 rounded-2xl bg-info/10 flex items-center justify-center">
                      <i class="fas fa-user-plus text-info text-sm"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                      <p class="font-semibold text-sm truncate" data-i18n="notif.item1.title">طلب جديد للمعلمين</p>
                      <p class="text-xs t-muted mt-1" data-i18n="notif.item1.time">قبل ساعتين</p>
                    </div>
                  </div>

                  <div class="flex items-start gap-3 p-3 rounded-2xl border border-base-300">
                    <div class="w-10 h-10 rounded-2xl bg-success/10 flex items-center justify-center">
                      <i class="fas fa-chalkboard-teacher text-success text-sm"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                      <p class="font-semibold text-sm truncate" data-i18n="notif.item2.title">تم انتهاء حصة الكيمياء</p>
                      <p class="text-xs t-muted mt-1" data-i18n="notif.item2.time">قبل 5 ساعات</p>
                    </div>
                  </div>

                  <div class="flex items-start gap-3 p-3 rounded-2xl border border-base-300">
                    <div class="w-10 h-10 rounded-2xl bg-warning/10 flex items-center justify-center">
                      <i class="fas fa-exclamation-triangle text-warning text-sm"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                      <p class="font-semibold text-sm truncate" data-i18n="notif.item3.title">نسبة حضور منخفضة</p>
                      <p class="text-xs t-muted mt-1" data-i18n="notif.item3.time">أمس</p>
                    </div>
                  </div>
                </div>

                <div class="pt-3 mt-3 border-t border-base-300">
                  <button class="btn btn-ghost btn-sm w-full" data-i18n="notif.viewAll">عرض كل التنبيهات</button>
                </div>
              </div>
            </div>
          </div>

          <!-- THEME SWITCH -->
          <button id="themeToggle" class="btn btn-ghost btn-sm p-2" aria-label="تبديل الوضع">
            <i class="fas fa-moon text-lg" id="themeIcon"></i>
          </button>

          <!-- Admin Profile -->
          <div class="dropdown dropdown-end">
            <div tabindex="0" role="button" class="flex items-center gap-2 btn btn-ghost px-3 py-2">
              <div class="w-10 h-10 rounded-full bg-primary text-primary-content flex items-center justify-center text-sm font-semibold">
                م
              </div>
              <span class="hidden md:inline text-sm font-semibold" data-i18n="profile.role">المشرف</span>
              <i class="fas fa-chevron-down text-xs t-muted"></i>
            </div>
            <ul tabindex="0" class="dropdown-content z-[1] menu p-2 w-56 bg-base-100 border border-base-300 rounded-2xl shadow">
              <li class="p-3 border-b border-base-300 rounded-2xl">
                <div class="font-semibold" data-i18n="profile.role">المشرف</div>
                <div class="text-sm t-muted">admin@lejaclasses.com</div>
              </li>
              <li><a class="rounded-xl"><i class="fas fa-user-cog text-sm"></i> <span data-i18n="profile.settings">إعدادات الملف</span></a></li>
              <li><a class="rounded-xl"><i class="fas fa-cog text-sm"></i> <span data-i18n="system.settings">إعدادات النظام</span></a></li>
              <li><a class="rounded-xl"><i class="fas fa-sign-out-alt text-sm"></i> <span data-i18n="logout">تسجيل الخروج</span></a></li>
            </ul>
          </div>
        </div>
      </div>

      <!-- PAGE CONTENT -->
      <main class="max-w-7xl mx-auto w-full" style="padding: var(--pad-page);">
        <div class="flex flex-col gap-6" style="gap: var(--gap-page);">

          <!-- HEADER -->
          <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4">
            <div>
              <h2 class="t-title gradient-text" data-i18n="header.title">مرحباً بعودتك، المشرف</h2>
              <p class="t-body t-muted mt-2">
                <span data-i18n="header.subtitle">نظرة عامة على المنصة. آخر تحديث</span>
                <span id="lastUpdate">اليوم</span>
              </p>
            </div>

            <div class="flex flex-wrap gap-2">
              <button class="btn btn-primary btn-sm"><i class="fas fa-plus ml-2"></i> <span data-i18n="actions.new">جديد</span></button>
              <button class="btn btn-outline btn-sm border-base-300"><i class="fas fa-download ml-2"></i> <span data-i18n="actions.export">تصدير</span></button>
              <button class="btn btn-ghost btn-sm"><i class="fas fa-filter ml-2"></i> <span data-i18n="actions.filter">تصفية</span></button>
            </div>
          </div>

          <!-- STATS -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <div class="stat-card p-5">
              <div class="flex justify-between items-start">
                <div>
                  <div class="w-12 h-12 rounded-2xl bg-success/10 flex items-center justify-center mb-3">
                    <i class="fas fa-calendar-check text-success"></i>
                  </div>
                  <h3 class="text-sm font-semibold t-muted" data-i18n="stats.attendance">نسبة الحضور</h3>
                  <div class="flex items-end gap-2 mt-2">
                    <p class="text-3xl font-semibold">92%</p>
                    <span class="text-error text-sm font-semibold flex items-center">
                      <i class="fas fa-arrow-down ml-1 text-xs"></i>
                      <span data-i18n="stats.attendance.delta">3% عن الأسبوع الماضي</span>
                    </span>
                  </div>
                </div>
                <div class="relative w-16 h-16">
                  <canvas id="attendanceChart"></canvas>
                </div>
              </div>
            </div>

            <div class="stat-card p-5">
              <div class="flex justify-between items-start">
                <div>
                  <div class="w-12 h-12 rounded-2xl bg-primary/10 flex items-center justify-center mb-3">
                    <i class="fas fa-user-graduate text-primary"></i>
                  </div>
                  <h3 class="text-sm font-semibold t-muted" data-i18n="stats.students">الطلاب</h3>
                  <div class="flex items-end gap-2 mt-2">
                    <p class="text-3xl font-semibold">154</p>
                    <span class="text-success text-sm font-semibold flex items-center">
                      <i class="fas fa-arrow-up ml-1 text-xs"></i>
                      <span data-i18n="stats.students.delta">12 هذا الشهر</span>
                    </span>
                  </div>
                </div>
                <div class="radial-progress text-success" style="--value:85; --size:3.6rem; --thickness: 5px;">
                  <span class="text-xs font-semibold">85%</span>
                </div>
              </div>
            </div>

            <div class="stat-card p-5">
              <div class="flex justify-between items-start">
                <div>
                  <div class="w-12 h-12 rounded-2xl bg-info/10 flex items-center justify-center mb-3">
                    <i class="fas fa-user-tie text-info"></i>
                  </div>
                  <h3 class="text-sm font-semibold t-muted" data-i18n="stats.teachers">المعلمون</h3>
                  <div class="flex items-end gap-2 mt-2">
                    <p class="text-3xl font-semibold">8</p>
                    <span class="text-success text-sm font-semibold flex items-center">
                      <i class="fas fa-arrow-up ml-1 text-xs"></i>
                      <span data-i18n="stats.teachers.delta">1 جديد</span>
                    </span>
                  </div>
                </div>

                <div class="avatar-group -space-x-2">
                  <div class="avatar"><div class="w-9 h-9"><img src="https://i.pravatar.cc/150?img=1" alt="Teacher" class="rounded-full" /></div></div>
                  <div class="avatar"><div class="w-9 h-9"><img src="https://i.pravatar.cc/150?img=2" alt="Teacher" class="rounded-full" /></div></div>
                  <div class="avatar placeholder">
                    <div class="w-9 h-9 bg-neutral text-neutral-content rounded-full flex items-center justify-center text-xs font-semibold">
                      <span>+6</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="stat-card p-5">
              <div class="flex justify-between items-start">
                <div>
                  <div class="w-12 h-12 rounded-2xl bg-warning/10 flex items-center justify-center mb-3">
                    <i class="fas fa-chalkboard-teacher text-warning"></i>
                  </div>
                  <h3 class="text-sm font-semibold t-muted" data-i18n="stats.classes">الفصول النشطة</h3>
                  <div class="flex items-end gap-2 mt-2">
                    <p class="text-3xl font-semibold">12</p>
                    <span class="text-success text-sm font-semibold flex items-center">
                      <i class="fas fa-arrow-up ml-1 text-xs"></i>
                      <span data-i18n="stats.classes.delta">2 هذا الأسبوع</span>
                    </span>
                  </div>
                </div>
                <div class="w-14 h-14 rounded-2xl bg-base-200 border border-base-300 flex items-center justify-center">
                  <i class="fas fa-layer-group text-neutral/60"></i>
                </div>
              </div>
            </div>
          </div>

          <!-- CHARTS + SESSIONS -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="notion-card" style="padding: var(--card-pad);">
              <div class="flex justify-between items-center mb-6">
                <h3 class="t-h3" data-i18n="chart.title">معدل التسجيل الشهري</h3>
                <select class="select select-bordered select-sm w-40">
                  <option data-i18n="chart.filter.6m">آخر 6 أشهر</option>
                  <option data-i18n="chart.filter.1y">السنة الماضية</option>
                  <option data-i18n="chart.filter.all">كل الوقت</option>
                </select>
              </div>
              <div class="h-64">
                <canvas id="enrollmentChart"></canvas>
              </div>
            </div>

            <div class="notion-card" style="padding: var(--card-pad);">
              <div class="flex justify-between items-center mb-6">
                <h3 class="t-h3" data-i18n="sessions.title">جلسات اليوم</h3>
                <div class="badge badge-info" data-i18n="sessions.count">3 جلسات</div>
              </div>

              <div class="space-y-3">
                <div class="session-card p-4 flex justify-between items-center">
                  <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-2xl bg-info/10 flex items-center justify-center">
                      <i class="fas fa-calculator text-info"></i>
                    </div>
                    <div>
                      <h4 class="font-semibold text-sm" data-i18n="sessions.s1.title">الرياضيات المستوى أ</h4>
                      <p class="text-xs t-muted mt-1" data-i18n="sessions.s1.meta">أحمد مصطفى • 12 طالب</p>
                    </div>
                  </div>
                  <div class="text-left">
                    <p class="font-semibold text-sm">5:00 PM</p>
                    <span class="badge badge-ghost border border-base-300 text-xs mt-1" data-i18n="sessions.upcoming">قادم</span>
                  </div>
                </div>

                <div class="session-card p-4 flex justify-between items-center">
                  <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-2xl bg-success/10 flex items-center justify-center">
                      <i class="fas fa-atom text-success"></i>
                    </div>
                    <div>
                      <h4 class="font-semibold text-sm" data-i18n="sessions.s2.title">أساسيات الفيزياء</h4>
                      <p class="text-xs t-muted mt-1" data-i18n="sessions.s2.meta">سارة حسن • 18 طالب</p>
                    </div>
                  </div>
                  <div class="text-left">
                    <p class="font-semibold text-sm">6:30 PM</p>
                    <span class="badge badge-success text-xs mt-1 inline-flex items-center gap-2" data-i18n="sessions.live">
                      <span class="relative flex h-2 w-2">
                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-success opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-success"></span>
                      </span>
                      جاري
                    </span>
                  </div>
                </div>

                <div class="session-card p-4 flex justify-between items-center">
                  <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-2xl bg-warning/10 flex items-center justify-center">
                      <i class="fas fa-flask text-warning"></i>
                    </div>
                    <div>
                      <h4 class="font-semibold text-sm" data-i18n="sessions.s3.title">مقدمة في الكيمياء</h4>
                      <p class="text-xs t-muted mt-1" data-i18n="sessions.s3.meta">عمر علي • 15 طالب</p>
                    </div>
                  </div>
                  <div class="text-left">
                    <p class="font-semibold text-sm">8:00 PM</p>
                    <span class="badge badge-warning text-xs mt-1" data-i18n="sessions.late">متأخر • 15 دقيقة</span>
                  </div>
                </div>
              </div>

              <div class="mt-6 pt-4 border-t border-base-300">
                <button class="btn btn-outline btn-sm w-full border-base-300">
                  <i class="fas fa-calendar-alt ml-2"></i>
                  <span data-i18n="sessions.viewAll">عرض كل الجلسات</span>
                </button>
              </div>
            </div>
          </div>

          <!-- ACTIVITY + QUICK -->
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="notion-card lg:col-span-2" style="padding: var(--card-pad);">
              <div class="flex items-center justify-between mb-6">
                <h3 class="t-h3" data-i18n="activity.title">النشاط الأخير</h3>
                <button class="btn btn-ghost btn-sm" data-i18n="activity.viewAll">عرض الكل</button>
              </div>

              <div class="space-y-3">
                <div class="flex items-center gap-4 p-4 rounded-2xl border border-base-300">
                  <div class="w-12 h-12 rounded-2xl bg-info/10 flex items-center justify-center">
                    <i class="fas fa-upload text-info"></i>
                  </div>
                  <div class="flex-1 min-w-0">
                    <div class="flex justify-between items-start gap-3">
                      <div>
                        <p class="font-semibold text-sm" data-i18n="activity.a1.title">رفع مواد دراسية جديدة</p>
                        <p class="text-xs t-muted mt-1" data-i18n="activity.a1.by">بواسطة ليلى أحمد</p>
                      </div>
                      <span class="badge badge-info text-xs" data-i18n="activity.a1.tag">الرياضيات المستوى ب</span>
                    </div>
                    <p class="text-xs t-muted mt-2" data-i18n="activity.a1.time">قبل 10:25 ص</p>
                  </div>
                </div>

                <div class="flex items-center gap-4 p-4 rounded-2xl border border-base-300">
                  <div class="w-12 h-12 rounded-2xl bg-success/10 flex items-center justify-center">
                    <i class="fas fa-plus text-success"></i>
                  </div>
                  <div class="flex-1 min-w-0">
                    <div class="flex justify-between items-start gap-3">
                      <div>
                        <p class="font-semibold text-sm" data-i18n="activity.a2.title">إضافة فصل جديد</p>
                        <p class="text-xs t-muted mt-1" data-i18n="activity.a2.by">بواسطة المشرف</p>
                      </div>
                      <span class="badge badge-success text-xs" data-i18n="activity.a2.tag">الأحياء المتقدم</span>
                    </div>
                    <p class="text-xs t-muted mt-2" data-i18n="activity.a2.time">أمس</p>
                  </div>
                </div>

                <div class="flex items-center gap-4 p-4 rounded-2xl border border-base-300">
                  <div class="w-12 h-12 rounded-2xl bg-primary/10 flex items-center justify-center">
                    <i class="fas fa-user-plus text-primary"></i>
                  </div>
                  <div class="flex-1 min-w-0">
                    <div class="flex justify-between items-start gap-3">
                      <div>
                        <p class="font-semibold text-sm" data-i18n="activity.a3.title">تسجيل طالب جديد</p>
                        <p class="text-xs t-muted mt-1" data-i18n="activity.a3.by">بواسطة محمد علي (ولي أمر)</p>
                      </div>
                      <span class="badge badge-ghost border border-base-300 text-xs" data-i18n="activity.a3.tag">تسجيل جديد</span>
                    </div>
                    <p class="text-xs t-muted mt-2" data-i18n="activity.a3.time">قبل يومين</p>
                  </div>
                </div>
              </div>
            </div>

            <div class="notion-card" style="padding: var(--card-pad);">
              <h3 class="t-h3 mb-6" data-i18n="quick.title">إجراءات سريعة</h3>

              <div class="grid grid-cols-2 gap-3">
                <button class="btn btn-outline border-base-300 flex flex-col items-center justify-center p-4 h-auto">
                  <i class="fas fa-user-plus text-info text-xl mb-2"></i>
                  <span class="text-xs font-semibold" data-i18n="quick.addTeacher">إضافة معلم</span>
                </button>

                <button class="btn btn-outline border-base-300 flex flex-col items-center justify-center p-4 h-auto">
                  <i class="fas fa-chalkboard text-success text-xl mb-2"></i>
                  <span class="text-xs font-semibold" data-i18n="quick.newClass">فصل جديد</span>
                </button>

                <button class="btn btn-outline border-base-300 flex flex-col items-center justify-center p-4 h-auto">
                  <i class="fas fa-file-invoice-dollar text-primary text-xl mb-2"></i>
                  <span class="text-xs font-semibold" data-i18n="quick.invoice">إنشاء فاتورة</span>
                </button>

                <button class="btn btn-outline border-base-300 flex flex-col items-center justify-center p-4 h-auto">
                  <i class="fas fa-bullhorn text-warning text-xl mb-2"></i>
                  <span class="text-xs font-semibold" data-i18n="quick.announce">إرسال إعلان</span>
                </button>
              </div>

              <div class="mt-8 pt-6 border-t border-base-300">
                <h4 class="font-semibold text-sm mb-4" data-i18n="system.title">حالة النظام</h4>

                <div class="space-y-3">
                  <div class="flex justify-between items-center">
                    <span class="text-sm font-semibold" data-i18n="system.load">حمل الخادم</span>
                    <div class="flex items-center gap-2">
                      <div class="w-24 bg-base-300 rounded-full h-2 overflow-hidden">
                        <div class="bg-success rounded-full h-2" style="width:65%"></div>
                      </div>
                      <span class="text-xs text-success font-semibold">65%</span>
                    </div>
                  </div>

                  <div class="flex justify-between items-center">
                    <span class="text-sm font-semibold" data-i18n="system.db">قاعدة البيانات</span>
                    <span class="badge badge-success text-xs" data-i18n="system.connected">متصل</span>
                  </div>

                  <div class="flex justify-between items-center">
                    <span class="text-sm font-semibold" data-i18n="system.backup">آخر نسخ احتياطي</span>
                    <span class="text-xs t-muted" data-i18n="system.backupVal">أمس</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </main>

      <!-- FOOTER -->
      <footer class="mt-auto p-6 border-t border-base-300">
        <div class="flex flex-col md:flex-row justify-between items-center gap-4">
          <p class="text-sm t-muted" data-i18n="footer.copy">© 2026 LeJaClasses. جميع الحقوق محفوظة.</p>
          <div class="flex items-center gap-4 text-sm t-muted">
            <a href="#" class="hover:text-base-content transition-colors" data-i18n="footer.help">المساعدة</a>
            <a href="#" class="hover:text-base-content transition-colors" data-i18n="footer.terms">الشروط</a>
            <a href="#" class="hover:text-base-content transition-colors" data-i18n="footer.privacy">الخصوصية</a>
          </div>
        </div>
      </footer>

    </div>

    <!-- SIDEBAR -->
    <div class="drawer-side">
      <label for="sidebar-toggle" class="drawer-overlay"></label>

      <aside class="w-80 bg-base-100 text-base-content border-l border-base-300">
        <div class="sidebar-shell p-6 gap-6">

          <div class="flex items-center gap-3 pb-6 border-b border-base-300">
            <div class="w-12 h-12 rounded-2xl bg-base-content flex items-center justify-center shadow-sm">
              <i class="fas fa-graduation-cap text-base-100"></i>
            </div>
            <div>
              <h2 class="text-lg font-semibold">LeJaClasses</h2>
              <p class="text-xs t-muted" data-i18n="sidebar.adminSubtitle">لوحة التحكم الإدارية</p>
            </div>
          </div>

          <nav class="space-y-1 overflow-y-auto pr-1">
            <a href="admin-dashboard.html" class="sidebar-link active">
              <i class="fas fa-tachometer-alt text-sm w-5"></i>
              <span data-i18n="nav.dashboard">لوحة التحكم</span>
              <span class="mr-auto text-xs t-muted">●</span>
            </a>

            <a href="admin-classes.html" class="sidebar-link">
              <i class="fas fa-chalkboard-teacher text-sm w-5"></i>
              <span data-i18n="nav.classes">الفصول</span>
            </a>

            <a href="admin-teachers.html" class="sidebar-link">
              <i class="fas fa-user-tie text-sm w-5"></i>
              <span data-i18n="nav.teachers">المعلمون</span>
              <span class="badge badge-info text-xs mr-auto">8</span>
            </a>

            <a href="admin-students.html" class="sidebar-link">
              <i class="fas fa-user-graduate text-sm w-5"></i>
              <span data-i18n="nav.students">الطلاب</span>
              <span class="badge badge-success text-xs mr-auto">154</span>
            </a>

            <a href="admin-schedule.html" class="sidebar-link">
              <i class="fas fa-calendar-alt text-sm w-5"></i>
              <span data-i18n="nav.schedule">الجدول</span>
            </a>

            <a href="admin-reports.html" class="sidebar-link">
              <i class="fas fa-chart-bar text-sm w-5"></i>
              <span data-i18n="nav.reports">التقارير</span>
            </a>

            <a href="admin-finance.html" class="sidebar-link">
              <i class="fas fa-dollar-sign text-sm w-5"></i>
              <span data-i18n="nav.finance">المالية</span>
            </a>

            <div class="border-t border-base-300 pt-5 mt-5">
              <p class="text-xs t-muted mb-3 font-semibold" data-i18n="sidebar.other">عروض أخرى</p>
              <div class="space-y-1">
                <a href="teacher-dashboard.html" class="sidebar-link">
                  <i class="fas fa-external-link-alt text-sm w-5"></i>
                  <span data-i18n="nav.teacherUI">واجهة المعلم</span>
                </a>
                <a href="parent-dashboard.html" class="sidebar-link">
                  <i class="fas fa-external-link-alt text-sm w-5"></i>
                  <span data-i18n="nav.parentUI">واجهة ولي الأمر</span>
                </a>
              </div>
            </div>
          </nav>

          <div class="mt-auto pt-6 border-t border-base-300">
            <div class="bg-base-200/70 border border-base-300 p-4 rounded-2xl">
              <div class="flex items-center gap-3 mb-3">
                <div class="w-12 h-12 rounded-2xl bg-info/10 flex items-center justify-center">
                  <i class="fas fa-question-circle text-info"></i>
                </div>
                <div>
                  <h4 class="font-semibold text-sm" data-i18n="help.title">تحتاج مساعدة؟</h4>
                  <p class="text-xs t-muted" data-i18n="help.sidebar">فريق الدعم متاح 24/7</p>
                </div>
              </div>
              <button class="btn btn-primary btn-sm w-full">
                <i class="fas fa-headset ml-2"></i>
                <span data-i18n="help.cta">الدعم الفني</span>
              </button>
            </div>
          </div>

        </div>
      </aside>
    </div>
  </div>

  <script>
    // ===== Theme =====
    const themeToggle = document.getElementById("themeToggle");
    const themeIcon = document.getElementById("themeIcon");
    const root = document.documentElement;

    // ===== Language =====
    const langToggle = document.getElementById("langToggle");
    const langLabel = document.getElementById("langLabel");

    // ===== Density =====
    const densityToggle = document.getElementById("densityToggle");
    const densityLabel = document.getElementById("densityLabel");

    let attendanceChartInstance = null;
    let enrollmentChartInstance = null;

    function setTheme(theme) {
      root.setAttribute("data-theme", theme);
      localStorage.setItem("leja_theme", theme);
      updateThemeIcon();

      setTimeout(() => {
        destroyCharts();
        initializeCharts();
      }, 50);
    }

    function updateThemeIcon() {
      const now = root.getAttribute("data-theme");
      themeIcon.className = now === "light" ? "fas fa-moon text-lg" : "fas fa-sun text-lg";
    }

    function initTheme() {
      const saved = localStorage.getItem("leja_theme");
      if (saved === "light" || saved === "dark") {
        root.setAttribute("data-theme", saved);
      } else {
        const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        root.setAttribute("data-theme", prefersDark ? "dark" : "light");
      }
      updateThemeIcon();
    }

    themeToggle.addEventListener("click", () => {
      const now = root.getAttribute("data-theme");
      setTheme(now === "light" ? "dark" : "light");
    });

    // ===== Density =====
    function setDensity(d) {
      root.setAttribute("data-density", d);
      localStorage.setItem("leja_density", d);

      // label depends on language
      const lang = root.getAttribute("lang") === "en" ? "en" : "ar";
      if (lang === "en") densityLabel.textContent = d === "comfortable" ? "Comfortable" : "Compact";
      else densityLabel.textContent = d === "comfortable" ? "مريح" : "مضغوط";
    }

    function initDensity() {
      const saved = localStorage.getItem("leja_density");
      setDensity(saved === "compact" ? "compact" : "comfortable");
    }

    densityToggle.addEventListener("click", () => {
      const now = root.getAttribute("data-density");
      setDensity(now === "comfortable" ? "compact" : "comfortable");
    });

    // ===== I18N =====
    const dict = {
      ar: {
        "top.subtitle": "لوحة تحكم المشرف",
        "search.placeholder": "بحث...",
        "notif.title": "التنبيهات",
        "notif.count": "3 جديدة",
        "notif.item1.title": "طلب جديد للمعلمين",
        "notif.item1.time": "قبل ساعتين",
        "notif.item2.title": "تم انتهاء حصة الكيمياء",
        "notif.item2.time": "قبل 5 ساعات",
        "notif.item3.title": "نسبة حضور منخفضة",
        "notif.item3.time": "أمس",
        "notif.viewAll": "عرض كل التنبيهات",

        "profile.role": "المشرف",
        "profile.settings": "إعدادات الملف",
        "system.settings": "إعدادات النظام",
        "logout": "تسجيل الخروج",

        "header.title": "مرحباً بعودتك، المشرف",
        "header.subtitle": "نظرة عامة على المنصة. آخر تحديث",
        "actions.new": "جديد",
        "actions.export": "تصدير",
        "actions.filter": "تصفية",

        "stats.attendance": "نسبة الحضور",
        "stats.attendance.delta": "3% عن الأسبوع الماضي",
        "stats.students": "الطلاب",
        "stats.students.delta": "12 هذا الشهر",
        "stats.teachers": "المعلمون",
        "stats.teachers.delta": "1 جديد",
        "stats.classes": "الفصول النشطة",
        "stats.classes.delta": "2 هذا الأسبوع",

        "chart.title": "معدل التسجيل الشهري",
        "chart.filter.6m": "آخر 6 أشهر",
        "chart.filter.1y": "السنة الماضية",
        "chart.filter.all": "كل الوقت",

        "sessions.title": "جلسات اليوم",
        "sessions.count": "3 جلسات",
        "sessions.s1.title": "الرياضيات المستوى أ",
        "sessions.s1.meta": "أحمد مصطفى • 12 طالب",
        "sessions.s2.title": "أساسيات الفيزياء",
        "sessions.s2.meta": "سارة حسن • 18 طالب",
        "sessions.s3.title": "مقدمة في الكيمياء",
        "sessions.s3.meta": "عمر علي • 15 طالب",
        "sessions.upcoming": "قادم",
        "sessions.live": "جاري",
        "sessions.late": "متأخر • 15 دقيقة",
        "sessions.viewAll": "عرض كل الجلسات",

        "activity.title": "النشاط الأخير",
        "activity.viewAll": "عرض الكل",
        "activity.a1.title": "رفع مواد دراسية جديدة",
        "activity.a1.by": "بواسطة ليلى أحمد",
        "activity.a1.tag": "الرياضيات المستوى ب",
        "activity.a1.time": "قبل 10:25 ص",
        "activity.a2.title": "إضافة فصل جديد",
        "activity.a2.by": "بواسطة المشرف",
        "activity.a2.tag": "الأحياء المتقدم",
        "activity.a2.time": "أمس",
        "activity.a3.title": "تسجيل طالب جديد",
        "activity.a3.by": "بواسطة محمد علي (ولي أمر)",
        "activity.a3.tag": "تسجيل جديد",
        "activity.a3.time": "قبل يومين",

        "quick.title": "إجراءات سريعة",
        "quick.addTeacher": "إضافة معلم",
        "quick.newClass": "فصل جديد",
        "quick.invoice": "إنشاء فاتورة",
        "quick.announce": "إرسال إعلان",

        "system.title": "حالة النظام",
        "system.load": "حمل الخادم",
        "system.db": "قاعدة البيانات",
        "system.connected": "متصل",
        "system.backup": "آخر نسخ احتياطي",
        "system.backupVal": "أمس",

        "footer.copy": "© 2026 LeJaClasses. جميع الحقوق محفوظة.",
        "footer.help": "المساعدة",
        "footer.terms": "الشروط",
        "footer.privacy": "الخصوصية",

        "sidebar.adminSubtitle": "لوحة التحكم الإدارية",
        "sidebar.other": "عروض أخرى",
        "help.sidebar": "فريق الدعم متاح 24/7",
        "nav.dashboard": "لوحة التحكم",
        "nav.classes": "الفصول",
        "nav.teachers": "المعلمون",
        "nav.students": "الطلاب",
        "nav.schedule": "الجدول",
        "nav.reports": "التقارير",
        "nav.finance": "المالية",
        "nav.teacherUI": "واجهة المعلم",
        "nav.parentUI": "واجهة ولي الأمر",
        "help.title": "تحتاج مساعدة؟",
        "help.cta": "الدعم الفني",

        "density.label": "مريح"
      },
      en: {
        "top.subtitle": "Admin Dashboard",
        "search.placeholder": "Search...",
        "notif.title": "Notifications",
        "notif.count": "3 new",
        "notif.item1.title": "New teacher request",
        "notif.item1.time": "2 hours ago",
        "notif.item2.title": "Chemistry session finished",
        "notif.item2.time": "5 hours ago",
        "notif.item3.title": "Low attendance rate",
        "notif.item3.time": "Yesterday",
        "notif.viewAll": "View all notifications",

        "profile.role": "Admin",
        "profile.settings": "Profile settings",
        "system.settings": "System settings",
        "logout": "Sign out",

        "header.title": "Welcome back, Admin",
        "header.subtitle": "Platform overview. Last updated",
        "actions.new": "New",
        "actions.export": "Export",
        "actions.filter": "Filter",

        "stats.attendance": "Attendance",
        "stats.attendance.delta": "3% vs last week",
        "stats.students": "Students",
        "stats.students.delta": "+12 this month",
        "stats.teachers": "Teachers",
        "stats.teachers.delta": "+1 new",
        "stats.classes": "Active classes",
        "stats.classes.delta": "+2 this week",

        "chart.title": "Monthly enrollment",
        "chart.filter.6m": "Last 6 months",
        "chart.filter.1y": "Last year",
        "chart.filter.all": "All time",

        "sessions.title": "Today's sessions",
        "sessions.count": "3 sessions",
        "sessions.s1.title": "Math — Level A",
        "sessions.s1.meta": "Ahmed Mostafa • 12 students",
        "sessions.s2.title": "Physics basics",
        "sessions.s2.meta": "Sara Hassan • 18 students",
        "sessions.s3.title": "Intro to chemistry",
        "sessions.s3.meta": "Omar Ali • 15 students",
        "sessions.upcoming": "Upcoming",
        "sessions.live": "Live",
        "sessions.late": "Late • 15 min",
        "sessions.viewAll": "View all sessions",

        "activity.title": "Recent activity",
        "activity.viewAll": "View all",
        "activity.a1.title": "New materials uploaded",
        "activity.a1.by": "by Laila Ahmed",
        "activity.a1.tag": "Math — Level B",
        "activity.a1.time": "10:25 AM",
        "activity.a2.title": "New class added",
        "activity.a2.by": "by Admin",
        "activity.a2.tag": "Advanced Biology",
        "activity.a2.time": "Yesterday",
        "activity.a3.title": "New student registered",
        "activity.a3.by": "by Mohamed Ali (Parent)",
        "activity.a3.tag": "New registration",
        "activity.a3.time": "2 days ago",

        "quick.title": "Quick actions",
        "quick.addTeacher": "Add teacher",
        "quick.newClass": "New class",
        "quick.invoice": "Create invoice",
        "quick.announce": "Send announcement",

        "system.title": "System status",
        "system.load": "Server load",
        "system.db": "Database",
        "system.connected": "Connected",
        "system.backup": "Last backup",
        "system.backupVal": "Yesterday",

        "footer.copy": "© 2026 LeJaClasses. All rights reserved.",
        "footer.help": "Help",
        "footer.terms": "Terms",
        "footer.privacy": "Privacy",

        "sidebar.adminSubtitle": "Admin Console",
        "sidebar.other": "Other views",
        "help.sidebar": "Support available 24/7",
        "nav.dashboard": "Dashboard",
        "nav.classes": "Classes",
        "nav.teachers": "Teachers",
        "nav.students": "Students",
        "nav.schedule": "Schedule",
        "nav.reports": "Reports",
        "nav.finance": "Finance",
        "nav.teacherUI": "Teacher UI",
        "nav.parentUI": "Parent UI",
        "help.title": "Need help?",
        "help.cta": "Support",

        "density.label": "Comfortable"
      }
    };

    function setLanguage(lang){
      const isEN = lang === "en";
      root.setAttribute("lang", isEN ? "en" : "ar");
      root.setAttribute("dir", isEN ? "ltr" : "rtl");
      localStorage.setItem("leja_lang", lang);

      // show the other language on button
      langLabel.textContent = isEN ? "AR" : "EN";

      document.querySelectorAll("[data-i18n]").forEach(el => {
        const key = el.getAttribute("data-i18n");
        const val = dict[lang][key];
        if (val) el.textContent = val;
      });

      document.querySelectorAll("[data-i18n-placeholder]").forEach(el => {
        const key = el.getAttribute("data-i18n-placeholder");
        const val = dict[lang][key];
        if (val) el.setAttribute("placeholder", val);
      });

      // sync density label after language switch
      const d = root.getAttribute("data-density") || "comfortable";
      setDensity(d);

      // rerender time + charts labels
      setLastUpdateText();
      destroyCharts();
      initializeCharts();
    }

    function initLanguage(){
      const saved = localStorage.getItem("leja_lang");
      setLanguage(saved === "en" ? "en" : "ar");
    }

    langToggle.addEventListener("click", () => {
      const current = root.getAttribute("lang") === "en" ? "en" : "ar";
      setLanguage(current === "en" ? "ar" : "en");
    });

    // ===== Last update text =====
    function setLastUpdateText() {
      const el = document.getElementById("lastUpdate");
      if (!el) return;
      const now = new Date();
      const hh = String(now.getHours()).padStart(2, "0");
      const mm = String(now.getMinutes()).padStart(2, "0");
      const lang = root.getAttribute("lang") === "en" ? "en" : "ar";
      el.textContent = lang === "en" ? `${hh}:${mm}` : `اليوم الساعة ${hh}:${mm}`;
    }

    // ===== Charts =====
    function cssVar(name) {
      return getComputedStyle(document.documentElement).getPropertyValue(name).trim();
    }

    function destroyCharts() {
      if (attendanceChartInstance) { attendanceChartInstance.destroy(); attendanceChartInstance = null; }
      if (enrollmentChartInstance) { enrollmentChartInstance.destroy(); enrollmentChartInstance = null; }
    }

    function initializeCharts() {
      const attendanceCanvas = document.getElementById("attendanceChart");
      const enrollmentCanvas = document.getElementById("enrollmentChart");
      if (!attendanceCanvas || !enrollmentCanvas) return;

      const success = `oklch(${cssVar("--su")})`;
      const base300 = `oklch(${cssVar("--b3")})`;
      const baseContent = `oklch(${cssVar("--bc")})`;
      const info = `oklch(${cssVar("--in")})`;

      attendanceChartInstance = new Chart(attendanceCanvas.getContext("2d"), {
        type: "doughnut",
        data: { datasets: [{ data: [92, 8], backgroundColor: [success, base300], borderWidth: 0, borderRadius: 999 }] },
        options: { cutout: "74%", responsive: true, maintainAspectRatio: true, plugins: { legend: { display: false }, tooltip: { enabled: false } } }
      });

      const lang = root.getAttribute("lang") === "en" ? "en" : "ar";
      const labelsAR = ["يناير","فبراير","مارس","أبريل","مايو","يونيو"];
      const labelsEN = ["Jan","Feb","Mar","Apr","May","Jun"];

      enrollmentChartInstance = new Chart(enrollmentCanvas.getContext("2d"), {
        type: "line",
        data: {
          labels: lang === "en" ? labelsEN : labelsAR,
          datasets: [{
            label: lang === "en" ? "New students" : "طلاب جدد",
            data: [12, 19, 15, 25, 22, 30],
            borderColor: info,
            backgroundColor: `color-mix(in oklab, ${info} 20%, transparent)`,
            tension: 0.4,
            fill: true,
            borderWidth: 3,
            pointRadius: 4,
            pointHoverRadius: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false } },
          scales: {
            y: { beginAtZero: true, grid: { color: `color-mix(in oklab, ${base300} 65%, transparent)` }, ticks: { color: baseContent } },
            x: { grid: { color: "transparent" }, ticks: { color: baseContent } }
          }
        }
      });
    }

    // Sidebar active (prototype)
    function wireSidebarActive() {
      document.querySelectorAll(".sidebar-link").forEach(link => {
        link.addEventListener("click", function (e) {
          if (this.getAttribute("href") && !this.getAttribute("href").includes("#")) e.preventDefault();
          else e.preventDefault();
          document.querySelectorAll(".sidebar-link").forEach(l => l.classList.remove("active"));
          this.classList.add("active");
        });
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      initTheme();
      initDensity();
      initLanguage();
      setLastUpdateText();
      initializeCharts();
      wireSidebarActive();
    });
  </script>
</body>
</html>
