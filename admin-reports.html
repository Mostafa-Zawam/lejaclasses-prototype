<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="light" data-density="comfortable">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LeJaClasses – التقارير</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- DaisyUI (CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.7.2/dist/full.css" rel="stylesheet" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    /* ==========================
       STANDARD, LIGHT FONT SYSTEM
    ========================== */
    *{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
      letter-spacing:-0.005em;
    }
    body{
      background-color: var(--fallback-b1, oklch(var(--b1)));
      color: var(--fallback-bc, oklch(var(--bc)));
    }

    /* ==========================
       DENSITY TOKENS (Compact/Comfortable)
    ========================== */
    :root{
      --pad-page: 24px;
      --gap-page: 24px;
      --card-pad: 24px;
      --card-radius: 14px;
      --btn-radius: 12px;

      --title-size: 28px;
      --h3-size: 18px;
      --body-size: 14px;

      --fw-title: 700;
      --fw-h3: 600;
      --fw-body: 500;
    }
    html[data-density="compact"]{
      --pad-page: 16px;
      --gap-page: 16px;
      --card-pad: 16px;
      --card-radius: 12px;

      --title-size: 24px;
      --h3-size: 16px;
      --body-size: 13px;
    }

    /* Background grid */
    .page-bg{
      background-image: radial-gradient(
        circle at 1px 1px,
        color-mix(in oklab, oklch(var(--b3)) 30%, transparent) 1px,
        transparent 0
      );
      background-size: 18px 18px;
    }

    /* Cards */
    .notion-card{
      background: var(--fallback-b1, oklch(var(--b1)));
      border: 1px solid var(--fallback-b3, oklch(var(--b3)));
      border-radius: var(--card-radius);
      box-shadow: 0 1px 3px rgba(0,0,0,.06);
      transition: transform .2s ease, box-shadow .2s ease, background-color .2s ease;
    }
    .notion-card:hover{ box-shadow: 0 10px 26px rgba(0,0,0,.08); }

    .stat-card{
      background: var(--fallback-b1, oklch(var(--b1)));
      border: 1px solid var(--fallback-b3, oklch(var(--b3)));
      border-radius: var(--card-radius);
      transition: transform .2s ease, box-shadow .2s ease;
      position: relative;
      overflow: hidden;
    }
    .stat-card:hover{
      transform: translateY(-2px);
      box-shadow: 0 12px 28px rgba(0,0,0,.10);
    }

    /* Navbar */
    .navbar{
      background: var(--fallback-b1, oklch(var(--b1)));
      border-bottom: 1px solid var(--fallback-b3, oklch(var(--b3)));
      backdrop-filter: blur(10px);
    }

    /* Buttons / Inputs */
    .btn{ border-radius: var(--btn-radius); font-weight: 600; }
    .badge{ border-radius: 999px; font-weight: 600; }

    .select,.input{
      border: 1px solid var(--fallback-b3, oklch(var(--b3)));
      border-radius: var(--btn-radius);
      background: var(--fallback-b1, oklch(var(--b1)));
      font-weight: 600;
    }

    /* Sidebar */
    .sidebar-shell{
      height:100vh;
      position:sticky;
      top:0;
      display:flex;
      flex-direction:column;
    }
    .sidebar-link{
      border-radius: var(--btn-radius);
      padding: 10px 12px;
      transition: background-color .15s ease, box-shadow .15s ease;
      font-weight: 600;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .sidebar-link:hover{ background-color: var(--fallback-b2, oklch(var(--b2)/0.7)); }
    .sidebar-link.active{
      background-color: var(--fallback-b2, oklch(var(--b2)));
      box-shadow: inset 0 0 0 1px var(--fallback-b3, oklch(var(--b3)));
      font-weight: 700;
    }

    /* Pills (Lang / Density) */
    .pill{
      border: 1px solid var(--fallback-b3, oklch(var(--b3)));
      background: color-mix(in oklab, var(--fallback-b2, oklch(var(--b2))) 70%, transparent);
      border-radius: 999px;
      padding: 8px 12px;
      font-weight: 700;
      display:flex;
      align-items:center;
      gap:8px;
    }

    /* LTR border polish */
    html[dir="ltr"] .drawer-side aside{
      border-left: 0 !important;
      border-right: 1px solid var(--fallback-b3, oklch(var(--b3))) !important;
    }

    /* Typography helpers */
    .t-title{ font-size: var(--title-size); font-weight: var(--fw-title); }
    .t-h3{ font-size: var(--h3-size); font-weight: var(--fw-h3); }
    .t-body{ font-size: var(--body-size); font-weight: var(--fw-body); }
    .t-muted{ color: color-mix(in oklab, oklch(var(--bc)) 55%, transparent); }

    /* Focus ring */
    :focus-visible{
      outline: 3px solid color-mix(in oklab, oklch(var(--p)) 35%, transparent);
      outline-offset: 2px;
      border-radius: var(--btn-radius);
    }

    /* Scrollbar */
    ::-webkit-scrollbar{width:10px;height:10px}
    ::-webkit-scrollbar-track{background: var(--fallback-b2, oklch(var(--b2))); border-radius: 999px}
    ::-webkit-scrollbar-thumb{background: var(--fallback-b3, oklch(var(--b3))); border-radius: 999px}
    ::-webkit-scrollbar-thumb:hover{background: var(--fallback-n, oklch(var(--n)))}

    /* Tabs (report categories) */
    .tablike{
      border: 1px solid var(--fallback-b3, oklch(var(--b3)));
      background: color-mix(in oklab, var(--fallback-b2, oklch(var(--b2))) 65%, transparent);
      border-radius: 999px;
      padding: 8px 12px;
      font-weight: 700;
      font-size: 13px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      transition: transform .15s ease, background-color .15s ease, box-shadow .15s ease;
    }
    .tablike:hover{
      transform: translateY(-1px);
      box-shadow: 0 10px 18px rgba(0,0,0,.07);
    }
    .tablike.active{
      background: var(--fallback-b1, oklch(var(--b1)));
      box-shadow: inset 0 0 0 1px var(--fallback-b3, oklch(var(--b3)));
    }

    /* Report row */
    .report-row{
      border: 1px solid var(--fallback-b3, oklch(var(--b3)));
      background: color-mix(in oklab, var(--fallback-b1, oklch(var(--b1))) 75%, transparent);
      border-radius: 14px;
      padding: 12px 14px;
      transition: transform .15s ease, box-shadow .2s ease, background-color .2s ease;
    }
    .report-row:hover{
      transform: translateY(-1px);
      box-shadow: 0 10px 20px rgba(0,0,0,.07);
      background: color-mix(in oklab, var(--fallback-b2, oklch(var(--b2))) 60%, transparent);
    }
    .kpi-dot{
      width: 10px; height: 10px; border-radius: 999px;
      background: oklch(var(--in));
      flex-shrink: 0;
      margin-top: 6px;
    }
    .kpi-dot.success{ background: oklch(var(--su)); }
    .kpi-dot.warning{ background: oklch(var(--wa)); }
    .kpi-dot.error{ background: oklch(var(--er)); }
  </style>
</head>

<body class="bg-base-100 text-base-content page-bg">
  <div class="drawer lg:drawer-open">
    <input id="sidebar-toggle" type="checkbox" class="drawer-toggle" />

    <!-- MAIN -->
    <div class="drawer-content min-h-screen flex flex-col">

      <!-- NAVBAR -->
      <div class="navbar px-6 sticky top-0 z-30">
        <div class="flex items-center gap-3">
          <label for="sidebar-toggle" class="btn btn-ghost lg:hidden p-2" aria-label="Open menu">
            <i class="fas fa-bars"></i>
          </label>

          <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-2xl bg-base-content flex items-center justify-center shadow-sm">
              <i class="fas fa-graduation-cap text-base-100 text-sm"></i>
            </div>
            <div class="leading-tight">
              <h1 class="text-lg font-semibold">LeJaClasses</h1>
              <span class="text-xs t-muted hidden md:inline" data-i18n="top.subtitle">لوحة تحكم المشرف</span>
            </div>
          </div>
        </div>

        <div class="flex items-center gap-2">
          <!-- Density Toggle -->
          <button id="densityToggle" class="pill" aria-label="Toggle spacing">
            <i class="fas fa-arrows-alt-v"></i>
            <span id="densityLabel" data-i18n="density.label">مريح</span>
          </button>

          <!-- Language Toggle -->
          <button id="langToggle" class="pill" aria-label="Toggle language">
            <i class="fas fa-language"></i>
            <span id="langLabel">EN</span>
          </button>

          <!-- Theme Toggle -->
          <button id="themeToggle" class="btn btn-ghost btn-sm p-2" aria-label="Toggle theme">
            <i class="fas fa-moon text-lg" id="themeIcon"></i>
          </button>

          <!-- Profile -->
          <div class="dropdown dropdown-end">
            <div tabindex="0" role="button" class="flex items-center gap-2 btn btn-ghost px-3 py-2">
              <div class="w-10 h-10 rounded-full bg-primary text-primary-content flex items-center justify-center text-sm font-semibold">
                م
              </div>
              <span class="hidden md:inline text-sm font-semibold" data-i18n="profile.role">المشرف</span>
              <i class="fas fa-chevron-down text-xs t-muted"></i>
            </div>
            <ul tabindex="0" class="dropdown-content z-[1] menu p-2 w-56 bg-base-100 border border-base-300 rounded-2xl shadow">
              <li class="p-3 border-b border-base-300 rounded-2xl">
                <div class="font-semibold" data-i18n="profile.role">المشرف</div>
                <div class="text-sm t-muted">admin@lejaclasses.com</div>
              </li>
              <li><a class="rounded-xl"><i class="fas fa-user-cog text-sm"></i> <span data-i18n="profile.settings">إعدادات الملف</span></a></li>
              <li><a class="rounded-xl"><i class="fas fa-cog text-sm"></i> <span data-i18n="system.settings">إعدادات النظام</span></a></li>
              <li><a class="rounded-xl"><i class="fas fa-sign-out-alt text-sm"></i> <span data-i18n="logout">تسجيل الخروج</span></a></li>
            </ul>
          </div>
        </div>
      </div>

      <!-- CONTENT -->
      <main class="max-w-7xl mx-auto w-full" style="padding: var(--pad-page);">
        <div class="flex flex-col" style="gap: var(--gap-page);">

          <!-- HEADER -->
          <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4">
            <div>
              <h2 class="t-title" data-i18n="reports.title">التقارير</h2>
              <p class="t-body t-muted mt-1" data-i18n="reports.subtitle">تجميعة تقارير جاهزة + تصدير سريع للـ PDF/Excel.</p>
            </div>

            <div class="flex flex-wrap gap-2">
              <button class="btn btn-primary btn-sm">
                <i class="fas fa-plus ml-2"></i>
                <span data-i18n="actions.newReport">تقرير جديد</span>
              </button>
              <button class="btn btn-outline btn-sm border-base-300">
                <i class="fas fa-download ml-2"></i>
                <span data-i18n="actions.export">تصدير</span>
              </button>
              <button class="btn btn-ghost btn-sm">
                <i class="fas fa-sliders-h ml-2"></i>
                <span data-i18n="actions.filters">فلاتر</span>
              </button>
            </div>
          </div>

          <!-- KPI CARDS -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <div class="stat-card p-5">
              <div class="flex justify-between items-start">
                <div>
                  <div class="w-12 h-12 rounded-2xl bg-info/10 flex items-center justify-center mb-3">
                    <i class="fas fa-file-alt text-info"></i>
                  </div>
                  <div class="text-sm t-muted font-semibold" data-i18n="kpi.totalReports">إجمالي التقارير</div>
                  <div class="text-3xl font-semibold mt-1">24</div>
                </div>
                <span class="badge badge-ghost border border-base-300 text-xs" data-i18n="kpi.thisMonth">هذا الشهر</span>
              </div>
            </div>

            <div class="stat-card p-5">
              <div class="flex justify-between items-start">
                <div>
                  <div class="w-12 h-12 rounded-2xl bg-success/10 flex items-center justify-center mb-3">
                    <i class="fas fa-eye text-success"></i>
                  </div>
                  <div class="text-sm t-muted font-semibold" data-i18n="kpi.views">المشاهدات</div>
                  <div class="text-3xl font-semibold mt-1">1,482</div>
                </div>
                <span class="badge badge-success text-xs">+12%</span>
              </div>
            </div>

            <div class="stat-card p-5">
              <div class="flex justify-between items-start">
                <div>
                  <div class="w-12 h-12 rounded-2xl bg-warning/10 flex items-center justify-center mb-3">
                    <i class="fas fa-clock text-warning"></i>
                  </div>
                  <div class="text-sm t-muted font-semibold" data-i18n="kpi.avgTime">متوسط وقت القراءة</div>
                  <div class="text-3xl font-semibold mt-1">3m</div>
                </div>
                <span class="badge badge-ghost border border-base-300 text-xs" data-i18n="kpi.last7">آخر 7 أيام</span>
              </div>
            </div>

            <div class="stat-card p-5">
              <div class="flex justify-between items-start">
                <div>
                  <div class="w-12 h-12 rounded-2xl bg-primary/10 flex items-center justify-center mb-3">
                    <i class="fas fa-download text-primary"></i>
                  </div>
                  <div class="text-sm t-muted font-semibold" data-i18n="kpi.exports">التصديرات</div>
                  <div class="text-3xl font-semibold mt-1">96</div>
                </div>
                <span class="badge badge-info text-xs">PDF • XLSX</span>
              </div>
            </div>
          </div>

          <!-- FILTERS + CHART -->
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- FILTERS -->
            <div class="notion-card p-4 lg:col-span-1">
              <div class="t-h3 mb-3" data-i18n="filters.title">فلاتر التقارير</div>

              <div class="space-y-3">
                <div>
                  <label class="text-xs t-muted font-semibold" data-i18n="filters.range">الفترة</label>
                  <select class="select select-sm w-full mt-1">
                    <option data-i18n="range.7">آخر 7 أيام</option>
                    <option data-i18n="range.30" selected>آخر 30 يوم</option>
                    <option data-i18n="range.q">الربع الحالي</option>
                    <option data-i18n="range.y">هذا العام</option>
                  </select>
                </div>

                <div>
                  <label class="text-xs t-muted font-semibold" data-i18n="filters.type">نوع التقرير</label>
                  <select class="select select-sm w-full mt-1">
                    <option data-i18n="type.all">الكل</option>
                    <option data-i18n="type.attendance">الحضور</option>
                    <option data-i18n="type.performance">الأداء</option>
                    <option data-i18n="type.finance">المالية</option>
                    <option data-i18n="type.engagement">التفاعل</option>
                  </select>
                </div>

                <div>
                  <label class="text-xs t-muted font-semibold" data-i18n="filters.owner">المنشئ</label>
                  <select class="select select-sm w-full mt-1">
                    <option data-i18n="filters.any">أي شخص</option>
                    <option>Admin</option>
                    <option>Manager</option>
                    <option>Teacher</option>
                  </select>
                </div>

                <div>
                  <label class="text-xs t-muted font-semibold" data-i18n="filters.search">بحث</label>
                  <div class="mt-1 flex items-center gap-2 border border-base-300 rounded-2xl px-3 py-2 bg-base-200/50">
                    <i class="fas fa-search text-xs t-muted"></i>
                    <input class="bg-transparent outline-none w-full text-sm font-semibold" placeholder="ابحث باسم التقرير..." data-i18n-ph="filters.searchPH" />
                  </div>
                </div>

                <div class="pt-2 flex gap-2">
                  <button class="btn btn-primary btn-sm flex-1" id="applyFilters">
                    <i class="fas fa-check ml-2"></i>
                    <span data-i18n="actions.apply">تطبيق</span>
                  </button>
                  <button class="btn btn-outline btn-sm border-base-300" id="resetFilters">
                    <i class="fas fa-undo"></i>
                  </button>
                </div>
              </div>

              <div class="mt-4 pt-4 border-t border-base-300">
                <div class="t-h3 mb-3" data-i18n="reports.categories">تصنيفات سريعة</div>
                <div class="flex flex-wrap gap-2">
                  <button class="tablike active" data-tab="all"><i class="fas fa-layer-group"></i> <span data-i18n="cat.all">الكل</span></button>
                  <button class="tablike" data-tab="attendance"><i class="fas fa-user-check"></i> <span data-i18n="cat.attendance">حضور</span></button>
                  <button class="tablike" data-tab="performance"><i class="fas fa-chart-line"></i> <span data-i18n="cat.performance">أداء</span></button>
                  <button class="tablike" data-tab="finance"><i class="fas fa-coins"></i> <span data-i18n="cat.finance">مالية</span></button>
                </div>
              </div>
            </div>

            <!-- CHART -->
            <div class="notion-card p-4 lg:col-span-2">
              <div class="flex items-center justify-between mb-3">
                <div class="t-h3" data-i18n="chart.title">نظرة عامة: المشاهدات والتصديرات</div>
                <div class="badge badge-ghost border border-base-300 text-xs" id="chartHint" data-i18n="chart.hint">آخر 30 يوم</div>
              </div>

              <div class="h-72">
                <canvas id="reportsChart"></canvas>
              </div>

              <div class="mt-4 pt-4 border-t border-base-300 grid grid-cols-1 md:grid-cols-3 gap-3">
                <div class="notion-card p-3">
                  <div class="text-xs t-muted font-semibold" data-i18n="chart.metric1">أعلى تقرير مشاهدة</div>
                  <div class="font-semibold mt-1" data-i18n="chart.metric1v">تقرير الحضور الأسبوعي</div>
                  <div class="text-xs t-muted mt-1">412 views</div>
                </div>
                <div class="notion-card p-3">
                  <div class="text-xs t-muted font-semibold" data-i18n="chart.metric2">أكثر تقرير تصديرًا</div>
                  <div class="font-semibold mt-1" data-i18n="chart.metric2v">تقرير الفواتير</div>
                  <div class="text-xs t-muted mt-1">28 exports</div>
                </div>
                <div class="notion-card p-3">
                  <div class="text-xs t-muted font-semibold" data-i18n="chart.metric3">جودة البيانات</div>
                  <div class="font-semibold mt-1" data-i18n="chart.metric3v">Stable</div>
                  <div class="text-xs t-muted mt-1" data-i18n="chart.metric3s">No anomalies detected</div>
                </div>
              </div>
            </div>
          </div>

          <!-- REPORTS LIST -->
          <div class="notion-card p-4">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-3 mb-4">
              <div class="t-h3" data-i18n="list.title">قائمة التقارير</div>
              <div class="flex flex-wrap gap-2">
                <button class="btn btn-ghost btn-sm">
                  <i class="fas fa-sort-amount-down ml-2"></i>
                  <span data-i18n="list.sort">ترتيب</span>
                </button>
                <button class="btn btn-outline btn-sm border-base-300">
                  <i class="fas fa-file-pdf ml-2"></i>
                  <span data-i18n="list.exportPDF">PDF</span>
                </button>
                <button class="btn btn-outline btn-sm border-base-300">
                  <i class="fas fa-file-excel ml-2"></i>
                  <span data-i18n="list.exportXLSX">Excel</span>
                </button>
              </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-3" id="reportList">
              <!-- Row 1 -->
              <div class="report-row" data-type="attendance">
                <div class="flex items-start gap-3">
                  <span class="kpi-dot success"></span>
                  <div class="flex-1 min-w-0">
                    <div class="flex items-start justify-between gap-3">
                      <div class="min-w-0">
                        <div class="font-semibold truncate" data-i18n="r1.title">تقرير الحضور الأسبوعي</div>
                        <div class="text-xs t-muted mt-1 font-semibold" data-i18n="r1.meta">آخر تحديث: اليوم • المنشئ: Admin</div>
                      </div>
                      <span class="badge badge-success text-xs" data-i18n="cat.attendance">حضور</span>
                    </div>
                    <div class="mt-3 flex flex-wrap gap-2">
                      <button class="btn btn-ghost btn-xs"><i class="fas fa-eye ml-1"></i><span data-i18n="actions.view">عرض</span></button>
                      <button class="btn btn-ghost btn-xs"><i class="fas fa-download ml-1"></i><span data-i18n="actions.download">تحميل</span></button>
                      <button class="btn btn-ghost btn-xs"><i class="fas fa-share-alt ml-1"></i><span data-i18n="actions.share">مشاركة</span></button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Row 2 -->
              <div class="report-row" data-type="performance">
                <div class="flex items-start gap-3">
                  <span class="kpi-dot"></span>
                  <div class="flex-1 min-w-0">
                    <div class="flex items-start justify-between gap-3">
                      <div class="min-w-0">
                        <div class="font-semibold truncate" data-i18n="r2.title">تقرير أداء الفصول</div>
                        <div class="text-xs t-muted mt-1 font-semibold" data-i18n="r2.meta">آخر تحديث: أمس • المنشئ: Manager</div>
                      </div>
                      <span class="badge badge-info text-xs" data-i18n="cat.performance">أداء</span>
                    </div>
                    <div class="mt-3 flex flex-wrap gap-2">
                      <button class="btn btn-ghost btn-xs"><i class="fas fa-eye ml-1"></i><span data-i18n="actions.view">عرض</span></button>
                      <button class="btn btn-ghost btn-xs"><i class="fas fa-download ml-1"></i><span data-i18n="actions.download">تحميل</span></button>
                      <button class="btn btn-ghost btn-xs"><i class="fas fa-share-alt ml-1"></i><span data-i18n="actions.share">مشاركة</span></button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Row 3 -->
              <div class="report-row" data-type="finance">
                <div class="flex items-start gap-3">
                  <span class="kpi-dot warning"></span>
                  <div class="flex-1 min-w-0">
                    <div class="flex items-start justify-between gap-3">
                      <div class="min-w-0">
                        <div class="font-semibold truncate" data-i18n="r3.title">تقرير الفواتير والمدفوعات</div>
                        <div class="text-xs t-muted mt-1 font-semibold" data-i18n="r3.meta">آخر تحديث: منذ 3 أيام • المنشئ: Admin</div>
                      </div>
                      <span class="badge badge-warning text-xs" data-i18n="cat.finance">مالية</span>
                    </div>
                    <div class="mt-3 flex flex-wrap gap-2">
                      <button class="btn btn-ghost btn-xs"><i class="fas fa-eye ml-1"></i><span data-i18n="actions.view">عرض</span></button>
                      <button class="btn btn-ghost btn-xs"><i class="fas fa-download ml-1"></i><span data-i18n="actions.download">تحميل</span></button>
                      <button class="btn btn-ghost btn-xs"><i class="fas fa-share-alt ml-1"></i><span data-i18n="actions.share">مشاركة</span></button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Row 4 -->
              <div class="report-row" data-type="engagement">
                <div class="flex items-start gap-3">
                  <span class="kpi-dot error"></span>
                  <div class="flex-1 min-w-0">
                    <div class="flex items-start justify-between gap-3">
                      <div class="min-w-0">
                        <div class="font-semibold truncate" data-i18n="r4.title">تقرير التفاعل والانضباط</div>
                        <div class="text-xs t-muted mt-1 font-semibold" data-i18n="r4.meta">آخر تحديث: منذ أسبوع • المنشئ: Manager</div>
                      </div>
                      <span class="badge badge-ghost border border-base-300 text-xs" data-i18n="cat.engagement">تفاعل</span>
                    </div>
                    <div class="mt-3 flex flex-wrap gap-2">
                      <button class="btn btn-ghost btn-xs"><i class="fas fa-eye ml-1"></i><span data-i18n="actions.view">عرض</span></button>
                      <button class="btn btn-ghost btn-xs"><i class="fas fa-download ml-1"></i><span data-i18n="actions.download">تحميل</span></button>
                      <button class="btn btn-ghost btn-xs"><i class="fas fa-share-alt ml-1"></i><span data-i18n="actions.share">مشاركة</span></button>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>

        </div>
      </main>

      <!-- FOOTER -->
      <footer class="mt-auto p-6 border-t border-base-300">
        <div class="flex flex-col md:flex-row justify-between items-center gap-4">
          <p class="text-sm t-muted" data-i18n="footer.copy">© 2026 LeJaClasses. جميع الحقوق محفوظة.</p>
          <div class="flex items-center gap-4 text-sm t-muted">
            <a href="#" class="hover:text-base-content transition-colors" data-i18n="footer.help">المساعدة</a>
            <a href="#" class="hover:text-base-content transition-colors" data-i18n="footer.terms">الشروط</a>
            <a href="#" class="hover:text-base-content transition-colors" data-i18n="footer.privacy">الخصوصية</a>
          </div>
        </div>
      </footer>
    </div>

    <!-- SIDEBAR -->
    <div class="drawer-side">
      <label for="sidebar-toggle" class="drawer-overlay"></label>

      <aside class="w-80 bg-base-100 text-base-content border-l border-base-300">
        <div class="sidebar-shell p-6 gap-6">

          <div class="flex items-center gap-3 pb-6 border-b border-base-300">
            <div class="w-12 h-12 rounded-2xl bg-base-content flex items-center justify-center shadow-sm">
              <i class="fas fa-graduation-cap text-base-100"></i>
            </div>
            <div>
              <h2 class="text-lg font-semibold">LeJaClasses</h2>
              <p class="text-xs t-muted" data-i18n="sidebar.adminSubtitle">لوحة التحكم الإدارية</p>
            </div>
          </div>

          <nav class="space-y-1 overflow-y-auto pr-1">
            <a href="admin-dashboard.html" class="sidebar-link">
              <i class="fas fa-tachometer-alt text-sm w-5"></i>
              <span data-i18n="nav.dashboard">لوحة التحكم</span>
            </a>

            <a href="admin-classes.html" class="sidebar-link">
              <i class="fas fa-chalkboard-teacher text-sm w-5"></i>
              <span data-i18n="nav.classes">الفصول</span>
            </a>

            <a href="admin-teachers.html" class="sidebar-link">
              <i class="fas fa-user-tie text-sm w-5"></i>
              <span data-i18n="nav.teachers">المعلمون</span>
              <span class="badge badge-info text-xs mr-auto">8</span>
            </a>

            <a href="admin-students.html" class="sidebar-link">
              <i class="fas fa-user-graduate text-sm w-5"></i>
              <span data-i18n="nav.students">الطلاب</span>
              <span class="badge badge-success text-xs mr-auto">154</span>
            </a>

            <a href="admin-schedule.html" class="sidebar-link">
              <i class="fas fa-calendar-alt text-sm w-5"></i>
              <span data-i18n="nav.schedule">الجدول</span>
            </a>

            <a href="admin-reports.html" class="sidebar-link active">
              <i class="fas fa-chart-bar text-sm w-5"></i>
              <span data-i18n="nav.reports">التقارير</span>
              <span class="mr-auto text-xs t-muted font-semibold">●</span>
            </a>

            <a href="admin-finance.html" class="sidebar-link">
              <i class="fas fa-dollar-sign text-sm w-5"></i>
              <span data-i18n="nav.finance">المالية</span>
            </a>

            <div class="border-t border-base-300 pt-5 mt-5">
              <p class="text-xs t-muted mb-3 font-semibold" data-i18n="sidebar.other">عروض أخرى</p>
              <div class="space-y-1">
                <a href="teacher-dashboard.html" class="sidebar-link">
                  <i class="fas fa-external-link-alt text-sm w-5"></i>
                  <span data-i18n="nav.teacherUI">واجهة المعلم</span>
                </a>
                <a href="parent-dashboard.html" class="sidebar-link">
                  <i class="fas fa-external-link-alt text-sm w-5"></i>
                  <span data-i18n="nav.parentUI">واجهة ولي الأمر</span>
                </a>
              </div>
            </div>
          </nav>

          <div class="mt-auto pt-6 border-t border-base-300">
            <div class="bg-base-200/70 border border-base-300 p-4 rounded-2xl">
              <div class="flex items-center gap-3 mb-3">
                <div class="w-12 h-12 rounded-2xl bg-info/10 flex items-center justify-center">
                  <i class="fas fa-question-circle text-info"></i>
                </div>
                <div>
                  <h4 class="font-semibold text-sm" data-i18n="help.title">تحتاج مساعدة؟</h4>
                  <p class="text-xs t-muted" data-i18n="help.sidebar">فريق الدعم متاح 24/7</p>
                </div>
              </div>
              <button class="btn btn-primary btn-sm w-full">
                <i class="fas fa-headset ml-2"></i>
                <span data-i18n="help.cta">الدعم الفني</span>
              </button>
            </div>
          </div>

        </div>
      </aside>
    </div>
  </div>

  <script>
    // ===== Theme =====
    const themeToggle = document.getElementById("themeToggle");
    const themeIcon = document.getElementById("themeIcon");
    const root = document.documentElement;

    function setTheme(theme) {
      root.setAttribute("data-theme", theme);
      localStorage.setItem("leja_theme", theme);
      updateThemeIcon();
      setTimeout(() => { destroyChart(); initChart(); }, 50);
    }
    function updateThemeIcon() {
      const now = root.getAttribute("data-theme");
      themeIcon.className = now === "light" ? "fas fa-moon text-lg" : "fas fa-sun text-lg";
    }
    function initTheme() {
      const saved = localStorage.getItem("leja_theme");
      if (saved === "light" || saved === "dark") root.setAttribute("data-theme", saved);
      else root.setAttribute("data-theme", window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
      updateThemeIcon();
    }
    themeToggle.addEventListener("click", () => {
      const now = root.getAttribute("data-theme");
      setTheme(now === "light" ? "dark" : "light");
    });

    // ===== Density =====
    const densityToggle = document.getElementById("densityToggle");
    const densityLabel = document.getElementById("densityLabel");

    function setDensity(d) {
      root.setAttribute("data-density", d);
      localStorage.setItem("leja_density", d);
      const lang = root.getAttribute("lang") === "en" ? "en" : "ar";
      densityLabel.textContent = (lang === "en")
        ? (d === "comfortable" ? "Comfortable" : "Compact")
        : (d === "comfortable" ? "مريح" : "مضغوط");
    }
    function initDensity() {
      const saved = localStorage.getItem("leja_density");
      setDensity(saved === "compact" ? "compact" : "comfortable");
    }
    densityToggle.addEventListener("click", () => {
      const now = root.getAttribute("data-density");
      setDensity(now === "comfortable" ? "compact" : "comfortable");
    });

    // ===== I18N =====
    const langToggle = document.getElementById("langToggle");
    const langLabel = document.getElementById("langLabel");

    const dict = {
      ar: {
        "top.subtitle":"لوحة تحكم المشرف",
        "profile.role":"المشرف",
        "profile.settings":"إعدادات الملف",
        "system.settings":"إعدادات النظام",
        "logout":"تسجيل الخروج",

        "reports.title":"التقارير",
        "reports.subtitle":"تجميعة تقارير جاهزة + تصدير سريع للـ PDF/Excel.",

        "actions.newReport":"تقرير جديد",
        "actions.export":"تصدير",
        "actions.filters":"فلاتر",
        "actions.apply":"تطبيق",
        "actions.view":"عرض",
        "actions.download":"تحميل",
        "actions.share":"مشاركة",

        "kpi.totalReports":"إجمالي التقارير",
        "kpi.views":"المشاهدات",
        "kpi.avgTime":"متوسط وقت القراءة",
        "kpi.exports":"التصديرات",
        "kpi.thisMonth":"هذا الشهر",
        "kpi.last7":"آخر 7 أيام",

        "filters.title":"فلاتر التقارير",
        "filters.range":"الفترة",
        "filters.type":"نوع التقرير",
        "filters.owner":"المنشئ",
        "filters.search":"بحث",
        "filters.any":"أي شخص",
        "filters.searchPH":"ابحث باسم التقرير...",

        "range.7":"آخر 7 أيام",
        "range.30":"آخر 30 يوم",
        "range.q":"الربع الحالي",
        "range.y":"هذا العام",

        "type.all":"الكل",
        "type.attendance":"الحضور",
        "type.performance":"الأداء",
        "type.finance":"المالية",
        "type.engagement":"التفاعل",

        "reports.categories":"تصنيفات سريعة",
        "cat.all":"الكل",
        "cat.attendance":"حضور",
        "cat.performance":"أداء",
        "cat.finance":"مالية",
        "cat.engagement":"تفاعل",

        "chart.title":"نظرة عامة: المشاهدات والتصديرات",
        "chart.hint":"آخر 30 يوم",
        "chart.metric1":"أعلى تقرير مشاهدة",
        "chart.metric1v":"تقرير الحضور الأسبوعي",
        "chart.metric2":"أكثر تقرير تصديرًا",
        "chart.metric2v":"تقرير الفواتير",
        "chart.metric3":"جودة البيانات",
        "chart.metric3v":"Stable",
        "chart.metric3s":"No anomalies detected",

        "list.title":"قائمة التقارير",
        "list.sort":"ترتيب",
        "list.exportPDF":"PDF",
        "list.exportXLSX":"Excel",

        "r1.title":"تقرير الحضور الأسبوعي",
        "r1.meta":"آخر تحديث: اليوم • المنشئ: Admin",
        "r2.title":"تقرير أداء الفصول",
        "r2.meta":"آخر تحديث: أمس • المنشئ: Manager",
        "r3.title":"تقرير الفواتير والمدفوعات",
        "r3.meta":"آخر تحديث: منذ 3 أيام • المنشئ: Admin",
        "r4.title":"تقرير التفاعل والانضباط",
        "r4.meta":"آخر تحديث: منذ أسبوع • المنشئ: Manager",

        "footer.copy":"© 2026 LeJaClasses. جميع الحقوق محفوظة.",
        "footer.help":"المساعدة",
        "footer.terms":"الشروط",
        "footer.privacy":"الخصوصية",

        "sidebar.adminSubtitle":"لوحة التحكم الإدارية",
        "sidebar.other":"عروض أخرى",
        "help.title":"تحتاج مساعدة؟",
        "help.sidebar":"فريق الدعم متاح 24/7",
        "help.cta":"الدعم الفني",

        "nav.dashboard":"لوحة التحكم",
        "nav.classes":"الفصول",
        "nav.teachers":"المعلمون",
        "nav.students":"الطلاب",
        "nav.schedule":"الجدول",
        "nav.reports":"التقارير",
        "nav.finance":"المالية",
        "nav.teacherUI":"واجهة المعلم",
        "nav.parentUI":"واجهة ولي الأمر",

        "density.label":"مريح"
      },
      en: {
        "top.subtitle":"Admin Dashboard",
        "profile.role":"Admin",
        "profile.settings":"Profile settings",
        "system.settings":"System settings",
        "logout":"Sign out",

        "reports.title":"Reports",
        "reports.subtitle":"Ready-made reports + quick export to PDF/Excel.",

        "actions.newReport":"New report",
        "actions.export":"Export",
        "actions.filters":"Filters",
        "actions.apply":"Apply",
        "actions.view":"View",
        "actions.download":"Download",
        "actions.share":"Share",

        "kpi.totalReports":"Total reports",
        "kpi.views":"Views",
        "kpi.avgTime":"Avg read time",
        "kpi.exports":"Exports",
        "kpi.thisMonth":"This month",
        "kpi.last7":"Last 7 days",

        "filters.title":"Report filters",
        "filters.range":"Range",
        "filters.type":"Type",
        "filters.owner":"Owner",
        "filters.search":"Search",
        "filters.any":"Anyone",
        "filters.searchPH":"Search report name...",

        "range.7":"Last 7 days",
        "range.30":"Last 30 days",
        "range.q":"This quarter",
        "range.y":"This year",

        "type.all":"All",
        "type.attendance":"Attendance",
        "type.performance":"Performance",
        "type.finance":"Finance",
        "type.engagement":"Engagement",

        "reports.categories":"Quick categories",
        "cat.all":"All",
        "cat.attendance":"Attendance",
        "cat.performance":"Performance",
        "cat.finance":"Finance",
        "cat.engagement":"Engagement",

        "chart.title":"Overview: Views & Exports",
        "chart.hint":"Last 30 days",
        "chart.metric1":"Top viewed report",
        "chart.metric1v":"Weekly attendance",
        "chart.metric2":"Most exported",
        "chart.metric2v":"Invoices report",
        "chart.metric3":"Data quality",
        "chart.metric3v":"Stable",
        "chart.metric3s":"No anomalies detected",

        "list.title":"Reports list",
        "list.sort":"Sort",
        "list.exportPDF":"PDF",
        "list.exportXLSX":"Excel",

        "r1.title":"Weekly attendance report",
        "r1.meta":"Updated: today • Owner: Admin",
        "r2.title":"Classes performance report",
        "r2.meta":"Updated: yesterday • Owner: Manager",
        "r3.title":"Invoices & payments report",
        "r3.meta":"Updated: 3 days ago • Owner: Admin",
        "r4.title":"Engagement & discipline report",
        "r4.meta":"Updated: 1 week ago • Owner: Manager",

        "footer.copy":"© 2026 LeJaClasses. All rights reserved.",
        "footer.help":"Help",
        "footer.terms":"Terms",
        "footer.privacy":"Privacy",

        "sidebar.adminSubtitle":"Admin Console",
        "sidebar.other":"Other views",
        "help.title":"Need help?",
        "help.sidebar":"Support available 24/7",
        "help.cta":"Support",

        "nav.dashboard":"Dashboard",
        "nav.classes":"Classes",
        "nav.teachers":"Teachers",
        "nav.students":"Students",
        "nav.schedule":"Schedule",
        "nav.reports":"Reports",
        "nav.finance":"Finance",
        "nav.teacherUI":"Teacher UI",
        "nav.parentUI":"Parent UI",

        "density.label":"Comfortable"
      }
    };

    function applyI18n(lang){
      document.querySelectorAll("[data-i18n]").forEach(el => {
        const key = el.getAttribute("data-i18n");
        const val = dict[lang][key];
        if (val) el.textContent = val;
      });

      // placeholders
      document.querySelectorAll("[data-i18n-ph]").forEach(el => {
        const key = el.getAttribute("data-i18n-ph");
        const val = dict[lang][key];
        if (val) el.setAttribute("placeholder", val);
      });
    }

    function setLanguage(lang){
      const isEN = lang === "en";
      root.setAttribute("lang", isEN ? "en" : "ar");
      root.setAttribute("dir", isEN ? "ltr" : "rtl");
      localStorage.setItem("leja_lang", lang);
      langLabel.textContent = isEN ? "AR" : "EN";
      applyI18n(lang);

      // keep density label consistent with language
      const d = root.getAttribute("data-density") || "comfortable";
      setDensity(d);
    }
    function initLanguage(){
      const saved = localStorage.getItem("leja_lang");
      setLanguage(saved === "en" ? "en" : "ar");
    }
    langToggle.addEventListener("click", () => {
      const current = root.getAttribute("lang") === "en" ? "en" : "ar";
      setLanguage(current === "en" ? "ar" : "en");
    });

    // ===== Chart (theme-aware) =====
    let chartInstance = null;

    function cssVar(name){ return getComputedStyle(document.documentElement).getPropertyValue(name).trim(); }
    function destroyChart(){ if (chartInstance) { chartInstance.destroy(); chartInstance = null; } }

    function initChart(){
      const canvas = document.getElementById("reportsChart");
      if (!canvas) return;

      const base300 = `oklch(${cssVar("--b3")})`;
      const baseContent = `oklch(${cssVar("--bc")})`;
      const info = `oklch(${cssVar("--in")})`;
      const primary = `oklch(${cssVar("--p")})`;
      const success = `oklch(${cssVar("--su")})`;

      chartInstance = new Chart(canvas.getContext("2d"), {
        type: "line",
        data: {
          labels: ["W1","W2","W3","W4"],
          datasets: [
            {
              label: "Views",
              data: [260, 320, 410, 492],
              borderColor: info,
              backgroundColor: `color-mix(in oklab, ${info} 18%, transparent)`,
              tension: 0.4,
              fill: true,
              borderWidth: 3,
              pointRadius: 4,
              pointHoverRadius: 6
            },
            {
              label: "Exports",
              data: [12, 18, 22, 44],
              borderColor: success,
              backgroundColor: `color-mix(in oklab, ${success} 14%, transparent)`,
              tension: 0.4,
              fill: true,
              borderWidth: 3,
              pointRadius: 4,
              pointHoverRadius: 6
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false } },
          scales: {
            y: {
              beginAtZero: true,
              grid: { color: `color-mix(in oklab, ${base300} 65%, transparent)` },
              ticks: { color: baseContent }
            },
            x: {
              grid: { color: "transparent" },
              ticks: { color: baseContent }
            }
          }
        }
      });
    }

    // ===== Tabs filter (prototype) =====
    const tabs = Array.from(document.querySelectorAll(".tablike"));
    const list = document.getElementById("reportList");

    function setActiveTab(tab){
      tabs.forEach(t => t.classList.remove("active"));
      tab.classList.add("active");

      const type = tab.getAttribute("data-tab");
      if (!list) return;

      Array.from(list.children).forEach(card => {
        const t = card.getAttribute("data-type");
        const show = (type === "all") ? true : (t === type);
        card.style.display = show ? "" : "none";
      });
    }

    tabs.forEach(t => t.addEventListener("click", () => setActiveTab(t)));

    // ===== Filters buttons (prototype only) =====
    document.getElementById("applyFilters")?.addEventListener("click", () => {
      const lang = root.getAttribute("lang") === "en" ? "en" : "ar";
      alert(lang === "en" ? "Applied (prototype)" : "تم التطبيق (بروتوتايب)");
    });
    document.getElementById("resetFilters")?.addEventListener("click", () => {
      const lang = root.getAttribute("lang") === "en" ? "en" : "ar";
      alert(lang === "en" ? "Reset (prototype)" : "تمت الإعادة (بروتوتايب)");
    });

    // ===== Init =====
    document.addEventListener("DOMContentLoaded", () => {
      initTheme();
      initDensity();
      initLanguage();
      initChart();
    });
  </script>
</body>
</html>
